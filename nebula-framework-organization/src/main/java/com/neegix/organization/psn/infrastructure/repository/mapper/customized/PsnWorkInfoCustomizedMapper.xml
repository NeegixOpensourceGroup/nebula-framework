<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!--
    This file is auto-generated by nebula-framework-generator.
    The auto-generation plugin was developed using IntelliJ IDEA Community Edition.
    Thanks to JetBrains for their outstanding contributions to the developer community.

    The code generated by this tool is owned by the user of the tool.
    The tool itself is copyrighted by https://www.neegix.com.

    @author https://www.neegix.com
    @version 1.0.0
    @since 2024-12-11 15:13:32
-->

<mapper namespace="com.neegix.organization.psn.infrastructure.repository.mapper.customized.PsnWorkInfoCustomizedMapper">

    <!-- Define a resultMap for PsnWorkInfoDO -->
    <resultMap id="PsnWorkInfoMap" type="com.neegix.organization.psn.infrastructure.repository.dataobject.PsnWorkInfoDO">
        <result property="pkPsn" column="pk_psn" />
        <result property="pkBizUnit" column="pk_biz_unit" />
        <result property="pkDept" column="pk_dept" />
        <result property="pkPost" column="pk_post" />
        <result property="code" column="code" />
        <result property="type" column="type" />
        <result property="major" column="major" />
        <result property="start" column="start" />
        <result property="end" column="end" />
        <result property="position" column="position" />
    </resultMap>

    <!-- Batch Insert PsnWorkInfo -->
    <insert id="batchInsertPsnWorkInfo" parameterType="java.util.List">
        INSERT INTO `sys_psn_work_info` (
        `pk_psn`, `pk_biz_unit`, `pk_dept`, `pk_post`, `code`, `type`, `major`, `start`, `end`, `position`
        ) VALUES
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.pkPsn}, #{item.pkBizUnit}, #{item.pkDept}, #{item.pkPost}, #{item.code}, #{item.type}, #{item.major}, #{item.start}, #{item.end}, #{item.position})
        </foreach>
    </insert>

    <!-- Batch Delete By PkPsn -->
    <delete id="batchDeleteByPkPsn" parameterType="list">
        DELETE FROM `sys_psn_work_info`
        WHERE `pk_psn` IN
        <foreach item="item" index="index" collection="list" open="(" separator="," close=")">
            #{item}
        </foreach>
    </delete>

    <!-- Select PsnWorkInfos By PkPsn -->
    <select id="selectPsnWorkInfos" parameterType="Long" resultMap="PsnWorkInfoMap">
        SELECT
        `pk_psn`, `pk_biz_unit`, `pk_dept`, `pk_post`, `code`, `type`, `major`, `start`, `end`, `position`
        FROM `sys_psn_work_info`
        WHERE `pk_psn` = #{pkPsn}
    </select>

    <select id="selectPsnPkByBizUnitAndDept" resultType="Long">
        SELECT DISTINCT p.pk_psn
        FROM sys_psn_work_info p
        WHERE p.pk_biz_unit = #{pkBizUnit}
        <if test="pkDept != null">
            AND p.pk_dept = #{pkDept}
        </if>
    </select>

</mapper>